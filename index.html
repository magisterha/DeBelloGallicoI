<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis de De Bello Gallico I, 1</title>
    
    <style type="text/css">
        /* --- Tailwind CSS Pre-compilado (Preflight & Utilitarios Usados) --- */
        *,::before,::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::before,::after{--tw-content:''}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type='button'],[type='reset'],[type='submit']{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type='search']{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item; cursor: pointer;}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button, [role="button"]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}
        .mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-10{margin-bottom:2.5rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.my-6{margin-top:1.5rem;margin-bottom:1.5rem}
        .block{display:block}.h-screen{height:100vh}.w-80{width:20rem}
        .overflow-y-auto{overflow-y:auto}.rounded-lg{border-radius:0.5rem}.rounded-md{border-radius:0.375rem}
        .border-b-2{border-bottom-width:2px}.border-stone-300{--tw-border-opacity:1;border-color:rgb(214 211 209 / var(--tw-border-opacity))}
        .bg-stone-100{--tw-bg-opacity:1;background-color:rgb(245 245 244 / var(--tw-bg-opacity))}
        .bg-stone-200{--tw-bg-opacity:1;background-color:rgb(231 229 228 / var(--tw-bg-opacity))}
        .bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}
        .p-1{padding:0.25rem}.p-2{padding:0.5rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.pb-5{padding-bottom:1.25rem}
        .text-center{text-align:center}.text-justify{text-align:justify}
        .text-2xl{font-size:1.5rem;line-height:2rem}.text-5xl{font-size:3rem;line-height:1}
        .text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}
        .font-bold{font-weight:700}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.leading-relaxed{line-height:1.625}.tracking-wider{letter-spacing:0.05em}
        .text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity))}
        .text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity))}
        .text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity))}
        .text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity))}
        .shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}
        .shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}
        .transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;-webkit-backdrop-filter:backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}
        .space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}
        .space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}
        @media (min-width:1024px){.lg\:p-12{padding:3rem}}

        /* --- Estilos Personalizados --- */
        body{background-color:#f3f0e9;font-family:'Helvetica Neue',Arial,sans-serif;color:#4a4a4a}
        .textum-classicum{font-family:'Georgia','Times New Roman',serif}
        .verbum{cursor:pointer;transition:background-color .2s ease-in-out, box-shadow .2s ease-in-out; border-radius: 0.25rem; padding: 0 0.1rem;}
        .verbum:hover{background-color:#ede6d6}
        .activus{background-color:#cbbca7!important;font-weight:700}
        
        /* --- ESTILOS PARA EL SELECTOR DE IDIOMA --- */
        #language-switcher { display: flex; gap: 0.5rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 1rem; }
        .lang-btn { flex-grow: 1; padding: 0.5rem; border: 1px solid #d6d3d1; background-color: #f5f5f4; color: #57534e; border-radius: 0.375rem; cursor: pointer; font-weight: 600; transition: background-color 0.2s, color 0.2s; font-size: 0.875rem;}
        .lang-btn:hover { background-color: #e7e5e4; }
        .lang-btn.active-lang { background-color: #4a4a4a; color: #ffffff; border-color: #4a4a4a; }
        
        /* --- ESTILOS PARA MENÚS DESPLEGABLES --- */
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details > summary::before { content: '▶'; margin-right: 0.5rem; font-size: 0.8em; transition: transform 0.2s; }
        details[open] > summary::before { transform: rotate(90deg); }
        details .details-content { padding-left: 1.2rem; margin-top: 0.5rem; border-left: 2px solid #e5e7eb; }

        /* --- LAYOUT RESPONSIVO (Móvil Primero) --- */
        .main-layout { padding: 1rem; padding-bottom: calc(45vh + 2rem); }
        #marginalia-sinistra { position: fixed; bottom: 0; left: 0; right: 0; width: 100%; height: 45vh; z-index: 50; border-top: 2px solid #d6d3d1; box-shadow: 0 -4px 10px rgba(0,0,0,0.1); transform: translateY(0); transition: transform 0.3s ease-in-out; }
        
        /* --- LAYOUT PARA ORDENADOR --- */
        @media (min-width: 1024px) {
            .main-layout {
                display: grid;
                grid-template-columns: 2fr 1fr;
                gap: 2rem;
                padding: 2rem;
            }
            #marginalia-sinistra {
                position: sticky;
                top: 2rem;
                bottom: auto;
                left: auto;
                right: auto;
                height: calc(100vh - 4rem);
                width: auto;
                border-top: none;
                box-shadow: var(--tw-shadow-xl);
            }
        }
    </style>
</head>
<body class="bg-stone-100">

    <div class="main-layout">
        <main>
            <header class="text-center mb-10 border-b-2 border-stone-300 pb-5">
                <h1 id="main-title" class="text-5xl textum-classicum text-gray-800"></h1>
                <h2 id="subtitle" class="text-2xl text-gray-600 mt-2"></h2>
                 <p id="author" class="text-xl text-gray-500 mt-4"></p>
            </header>
            
            <section class="mb-6">
                <h3 id="context-title" class="text-2xl font-semibold text-gray-700 mb-2"></h3>
                <div id="context-content" class="text-justify bg-white p-6 rounded-lg shadow-lg space-y-4"></div>
            </section>
            
            <section>
                 <h3 id="text-title" class="text-2xl font-semibold text-gray-700 mb-2"></h3>
                <div id="paragrafus-contentus" class="textum-classicum text-xl leading-relaxed text-justify bg-white p-8 lg:p-12 rounded-lg shadow-lg"></div>
            </section>
            
            <footer class="text-center mt-6 text-sm text-gray-500">
                <p id="footer-text"></p>
            </footer>
        </main>

        <aside id="marginalia-sinistra" class="bg-white p-6 rounded-t-lg lg:rounded-lg overflow-y-auto">
            <div id="language-switcher" class="mb-4">
                <button data-lang="es" class="lang-btn active-lang">Español</button>
                <button data-lang="en" class="lang-btn">English</button>
                <button data-lang="zh" class="lang-btn">中文 (繁體)</button>
            </div>
            <div id="marginalia-contentus"></div>
        </aside>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // =========================================================================================
        // === INICIO DE LA ZONA DE DATOS ===
        // Edita el contenido del objeto `corpus` para cambiar el texto y los análisis.
        // =========================================================================================
        const corpus = {
            // --- Títulos y Autor ---
            titulus_principalis: "De Bello Gallico, I, 1",
            auctor: "C. Iulius Caesar",
            titulus_secundarius: {
                es: "Comentarios sobre la Guerra de las Galias",
                en: "Commentaries on the Gallic War",
                zh: "高盧戰記"
            },
            // --- Introducción Contextual ---
            introductio: {
                es: {
                    titulus: "Introducción Contextual",
                    contentus: `<p>Los <i>Commentarii de Bello Gallico</i> (Comentarios sobre la Guerra de las Galias) son mucho más que un simple registro de las campañas militares de César (58-50 a.C.). Se trata de una obra maestra de la prosa latina, caracterizada por su claridad, precisión y un estilo directo y sin adornos.</p><p>Escrita en tercera persona para dar una impresión de objetividad, la obra servía como una sofisticada herramienta de propaganda política, destinada a justificar las prolongadas campañas de César ante el Senado y el pueblo de Roma. La frase inicial es icónica por su autoridad y concisión. Con una economía de palabras magistral, César impone un orden romano sobre una realidad geográfica y étnica vasta y compleja. Comienza su relato no con una acción, sino con una definición, estableciendo el escenario del conflicto y demostrando su dominio intelectual sobre el territorio que se disponía a conquistar.</p>`
                },
                en: {
                    titulus: "Contextual Introduction",
                    contentus: `<p>The <i>Commentarii de Bello Gallico</i> (Commentaries on the Gallic War) are much more than a simple record of Caesar's military campaigns (58-50 BC). They are a masterpiece of Latin prose, characterized by clarity, precision, and a direct, unadorned style.</p><p>Written in the third person to give an impression of objectivity, the work served as a sophisticated tool of political propaganda, intended to justify Caesar's prolonged campaigns to the Senate and people of Rome. The opening sentence is iconic for its authority and conciseness. With masterful economy of words, Caesar imposes a Roman order on a vast and complex geographical and ethnic reality. He begins his account not with an action, but with a definition, setting the stage for the conflict and demonstrating his intellectual mastery over the territory he was preparing to conquer.</p>`
                },
                zh: {
                    titulus: "背景介紹",
                    contentus: `<p>《高盧戰記》不僅僅是凱撒軍事行動（西元前58-50年）的簡單記錄。它是拉丁散文的傑作，以其清晰、精確和直白樸實的風格而聞名。</p><p>該書以第三人稱寫成，給人客觀的印象，是當時一種高明的政治宣傳工具，旨在向羅馬的元老院和人民證明凱撒長期軍事行動的正當性。開篇句因其權威性和簡潔性而成為經典。凱撒以精湛的簡約筆觸，將羅馬的秩序強加於一個廣闊而複雜的地理和民族現實之上。他並非以行動開篇，而是以一個定義開始，為衝突設定了舞台，並展示了他對即將征服的領土的智識上的掌控。</p>`
                }
            },
            // --- Texto Principal y Análisis ---
            textus: {
                id: 1,
                orationes: [
                    {
                        id_orationis: 'o1',
                        textus_originalis: "Gallia est omnis divisa in partes tres, quarum unam incolunt Belgae, aliam Aquitani, tertiam qui ipsorum lingua Celtae, nostra Galli appellantur.",
                        analysis_syntacticus: {
                            es: {
                                titulus: "Análisis Sintáctico",
                                contentus: `<p>La estructura es una oración compuesta. La <b>cláusula principal</b> es "<i>Gallia est omnis divisa in partes tres</i>". Es una estructura copulativa simple: Sujeto (Gallia, modificado por <i>omnis</i>) + Verbo copulativo (est) + Atributo (<i>divisa</i>). "<i>In partes tres</i>" es un complemento circunstancial de resultado.</p><p>A esta se subordina una <b>cláusula de relativo</b> introducida por "<i>quarum</i>" (genitivo partitivo). Esta cláusula usa magistralmente la elipsis (omisión de palabras) y el asíndeton (omisión de conjunciones), dividiéndose en tres segmentos paralelos:</p><ol style="list-style-type: decimal; margin-left: 20px;"><li><b>quarum unam incolunt Belgae</b>: Estructura completa (OD - Verbo - Sujeto).</li><li><b>aliam Aquitani</b>: Elipsis del verbo <i>incolunt</i>.</li><li><b>tertiam qui [...] appellantur</b>: Elipsis del verbo <i>incolunt</i>.</li></ol><p>El tercer segmento contiene otra cláusula de relativo anidada: "<i>qui ... appellantur</i>", donde <i>qui</i> es el sujeto del verbo pasivo, que rige dos predicados nominales (<i>Celtae</i> y <i>Galli</i>) contextualizados por dos ablativos de respeto contrapuestos: "<i>ipsorum lingua</i>" y "<i>nostra [lingua]</i>".</p>`
                            },
                             en: {
                                titulus: "Syntactic Analysis",
                                contentus: `<p>The structure is a compound sentence. The <b>main clause</b> is "<i>Gallia est omnis divisa in partes tres</i>." It's a simple copulative structure: Subject (Gallia, modified by <i>omnis</i>) + Copulative Verb (est) + Predicate Adjective (<i>divisa</i>). "<i>In partes tres</i>" is a circumstantial complement indicating the result.</p><p>Subordinate to this is a <b>relative clause</b> introduced by "<i>quarum</i>" (partitive genitive). This clause masterfully uses ellipsis (omission of words) and asyndeton (omission of conjunctions), splitting into three parallel segments:</p><ol style="list-style-type: decimal; margin-left: 20px;"><li><b>quarum unam incolunt Belgae</b>: Complete structure (DO - Verb - Subject).</li><li><b>aliam Aquitani</b>: Ellipsis of the verb <i>incolunt</i>.</li><li><b>tertiam qui [...] appellantur</b>: Ellipsis of the verb <i>incolunt</i>.</li></ol><p>The third segment contains another nested relative clause: "<i>qui ... appellantur</i>," where <i>qui</i> is the subject of the passive verb, which governs two predicate nominatives (<i>Celtae</i> and <i>Galli</i>) contextualized by two contrasting ablatives of respect: "<i>ipsorum lingua</i>" and "<i>nostra [lingua]</i>".</p>`
                            },
                            zh: {
                                titulus: "句法分析",
                                contentus: `<p>此為一個複合句。<b>主句</b>是「<i>Gallia est omnis divisa in partes tres</i>」。這是一個簡單的繫詞結構：主語 (Gallia，由 <i>omnis</i> 修飾) + 繫詞 (est) + 表語形容詞 (<i>divisa</i>)。「<i>In partes tres</i>」是表示結果的狀語補語。</p><p>主句之下是一個由「<i>quarum</i>」(部分屬格) 引導的<b>關係子句</b>。該子句巧妙地運用了省略法和連接詞省略法，分為三個平行的部分：</p><ol style="list-style-type: decimal; margin-left: 20px;"><li><b>quarum unam incolunt Belgae</b>：完整的結構（直接賓語 - 動詞 - 主語）。</li><li><b>aliam Aquitani</b>：省略了動詞 <i>incolunt</i>。</li><li><b>tertiam qui [...] appellantur</b>：省略了動詞 <i>incolunt</i>。</li></ol><p>第三部分包含另一個嵌套的關係子句：「<i>qui ... appellantur</i>」，其中 <i>qui</i> 是被動動詞的主語，該動詞帶有兩個主格表語 (<i>Celtae</i> 和 <i>Galli</i>)，並由兩個對比鮮明的方面離格進行語境化：「<i>ipsorum lingua</i>」和「<i>nostra [lingua]</i>」。</p>`
                            }
                        },
                        translationes_explicatae: {
                            es: {
                                titulus: "Traducciones y Comentarios",
                                contentus: `<p><b>Traducción Literal:</b><br><i>La Galia está toda dividida en partes tres, de las cuales una habitan los Belgas, otra los Aquitanos, la tercera [aquellos] que en la lengua de ellos mismos Celtas, en la nuestra Galos son llamados.</i></p><p><b>Traducción Idiomática/Literaria:</b><br><i>Toda la Galia está dividida en tres partes: una la habitan los belgas, otra los aquitanos, y la tercera aquellos que en su propia lengua se llaman celtas y en la nuestra, galos.</i></p>`
                            },
                             en: {
                                titulus: "Translations & Commentary",
                                contentus: `<p><b>Literal Translation:</b><br><i>Gaul is all divided into parts three, of which one inhabit the Belgae, another the Aquitani, the third [those] who in the language of themselves Celts, in ours Gauls are called.</i></p><p><b>Idiomatic/Literary Translation:</b><br><i>All Gaul is divided into three parts, one of which the Belgae inhabit, another the Aquitani, and the third, those who in their own language are called Celts, in ours, Gauls.</i></p>`
                            },
                            zh: {
                                titulus: "翻譯與註釋",
                                contentus: `<p><b>直譯：</b><br><i>高盧全境被分為三個部分，其中一部分由貝爾格人居住，另一部分由阿奎坦尼人居住，第三部分由那些在他們自己的語言中被稱為凱爾特人，在我們的語言中被稱為高盧人的人居住。</i></p><p><b>意譯/文學翻譯：</b><br><i>整個高盧分為三個部分：其中一部分由貝爾格人居住，另一部分由阿奎坦尼人居住，第三部分則是那些在自己語言中稱為凱爾特人、在我們的語言中稱為高盧人的民族。</i></p>`
                            }
                        },
                        verba: [
                            { id_verbi: 'v1_1', terminus: 'Gallia', analysis_morphologicus: 'Sustantivo, femenino, singular, nominativo. Sujeto de "est".', analysis_morphologicus_en: 'Noun, feminine, singular, nominative. Subject of "est".', analysis_morphologicus_zh: '名詞，陰性，單數，主格。「est」的主語。'},
                            { id_verbi: 'v1_2', terminus: 'est', analysis_morphologicus: 'Verbo (\'sum\'), 3ª persona, singular, presente de indicativo. Verbo copulativo.', analysis_morphologicus_en: 'Verb (\'sum\'), 3rd person, singular, present indicative. Copulative verb.', analysis_morphologicus_zh: '動詞（來自「sum」），第三人稱，單數，現在時直陳語態。繫動詞。'},
                            { id_verbi: 'v1_3', terminus: 'omnis', analysis_morphologicus: 'Adjetivo, femenino, singular, nominativo. Concuerda con "Gallia" ("en su totalidad" o "toda").', analysis_morphologicus_en: 'Adjective, feminine, singular, nominative. Agrees with "Gallia" ("as a whole" or "all").', analysis_morphologicus_zh: '形容詞，陰性，單數，主格。修飾「Gallia」（意為「整體的」或「所有的」）。'},
                            { id_verbi: 'v1_4', terminus: 'divisa', analysis_morphologicus: 'Participio perfecto pasivo (\'divido\'), femenino, singular, nominativo. Concuerda con "Gallia". Atributo/Predicado nominal.', analysis_morphologicus_en: 'Perfect passive participle (\'divido\'), feminine, singular, nominative. Agrees with "Gallia". Predicate adjective.', analysis_morphologicus_zh: '完成時被動分詞（來自動詞「divido」），陰性，單數，主格。修飾「Gallia」。表語形容詞。'},
                            { id_verbi: 'v1_5', terminus: 'in', analysis_morphologicus: 'Preposición. Rige acusativo (indica resultado o estado final: "dividida en").', analysis_morphologicus_en: 'Preposition. Governs the accusative (indicates result or final state: "divided into").', analysis_morphologicus_zh: '介詞。支配賓格（表示結果或最終狀態：「劃分為」）。'},
                            { id_verbi: 'v1_6', terminus: 'partes', analysis_morphologicus: 'Sustantivo, femenino, plural, acusativo. Término de la preposición "in".', analysis_morphologicus_en: 'Noun, feminine, plural, accusative. Object of the preposition "in".', analysis_morphologicus_zh: '名詞，陰性，複數，賓格。介詞「in」的賓語。'},
                            { id_verbi: 'v1_7', terminus: 'tres,', analysis_morphologicus: 'Adjetivo numeral cardinal, femenino, plural, acusativo. Concuerda con "partes".', analysis_morphologicus_en: 'Cardinal numeral adjective, feminine, plural, accusative. Agrees with "partes".', analysis_morphologicus_zh: '基數詞形容詞，陰性，複數，賓格。修飾「partes」。'},
                            { id_verbi: 'v1_8', terminus: 'quarum', analysis_morphologicus: 'Pronombre relativo, femenino, plural, genitivo. Referente: "partes tres". Genitivo partitivo ("de las cuales").', analysis_morphologicus_en: 'Relative pronoun, feminine, plural, genitive. Antecedent: "partes tres". Partitive genitive ("of which").', analysis_morphologicus_zh: '關係代名詞，陰性，複數，屬格。先行詞：「partes tres」。部分屬格（「其中的」）。'},
                            { id_verbi: 'v1_9', terminus: 'unam', analysis_morphologicus: 'Adjetivo/pronombre numeral, femenino, singular, acusativo. Objeto directo de "incolunt".', analysis_morphologicus_en: 'Numeral adjective/pronoun, feminine, singular, accusative. Direct object of "incolunt".', analysis_morphologicus_zh: '數詞形容詞/代名詞，陰性，單數，賓格。「incolunt」的直接賓語。'},
                            { id_verbi: 'v1_10', terminus: 'incolunt', analysis_morphologicus: 'Verbo, 3ª persona, plural, presente de indicativo activo.', analysis_morphologicus_en: 'Verb, 3rd person, plural, present indicative active.', analysis_morphologicus_zh: '動詞，第三人稱，複數，現在時直陳主動語態。'},
                            { id_verbi: 'v1_11', terminus: 'Belgae,', analysis_morphologicus: 'Sustantivo (propio), masculino, plural, nominativo. Sujeto de "incolunt".', analysis_morphologicus_en: 'Noun (proper), masculine, plural, nominative. Subject of "incolunt".', analysis_morphologicus_zh: '名詞（專有），陽性，複數，主格。「incolunt」的主語。'},
                            { id_verbi: 'v1_12', terminus: 'aliam', analysis_morphologicus: 'Pronombre indefinido, femenino, singular, acusativo. Objeto directo del "incolunt" elidido (elipsis).', analysis_morphologicus_en: 'Indefinite pronoun, feminine, singular, accusative. Direct object of the implied "incolunt" (ellipsis).', analysis_morphologicus_zh: '不定代名詞，陰性，單數，賓格。省略的「incolunt」的直接賓語（省略）。'},
                            { id_verbi: 'v1_13', terminus: 'Aquitani,', analysis_morphologicus: 'Sustantivo (propio), masculino, plural, nominativo. Sujeto del "incolunt" elidido.', analysis_morphologicus_en: 'Noun (proper), masculine, plural, nominative. Subject of the implied "incolunt".', analysis_morphologicus_zh: '名詞（專有），陽性，複數，主格。省略的「incolunt」的主語。'},
                            { id_verbi: 'v1_14', terminus: 'tertiam', analysis_morphologicus: 'Adjetivo numeral ordinal, femenino, singular, acusativo. Objeto directo del "incolunt" elidido.', analysis_morphologicus_en: 'Ordinal numeral adjective, feminine, singular, accusative. Direct object of the implied "incolunt".', analysis_morphologicus_zh: '序數詞形容詞，陰性，單數，賓格。省略的「incolunt」的直接賓語。'},
                            { id_verbi: 'v1_15', terminus: 'qui', analysis_morphologicus: 'Pronombre relativo, masculino, plural, nominativo. Sujeto de "appellantur" (y sujeto del tercer "incolunt" elidido).', analysis_morphologicus_en: 'Relative pronoun, masculine, plural, nominative. Subject of "appellantur" (and subject of the third implied "incolunt").', analysis_morphologicus_zh: '關係代名詞，陽性，複數，主格。「appellantur」的主語（也是第三個省略的「incolunt」的主語）。'},
                            { id_verbi: 'v1_16', terminus: 'ipsorum', analysis_morphologicus: 'Pronombre intensivo (\'ipse\'), masculino, plural, genitivo. Genitivo posesivo ("de ellos mismos"), modifica a "lingua".', analysis_morphologicus_en: 'Intensive pronoun (\'ipse\'), masculine, plural, genitive. Possessive genitive ("of themselves"), modifies "lingua".', analysis_morphologicus_zh: '強調代名詞（\'ipse\'），陽性，複數，屬格。領屬屬格（「他們自己的」），修飾「lingua」。'},
                            { id_verbi: 'v1_17', terminus: 'lingua', analysis_morphologicus: 'Sustantivo, femenino, singular, ablativo. Ablativo de respeto o instrumental ("en la lengua").', analysis_morphologicus_en: 'Noun, feminine, singular, ablative. Ablative of respect or means ("in the language").', analysis_morphologicus_zh: '名詞，陰性，單數，離格。方面或工具離格（「用...語言」）。'},
                            { id_verbi: 'v1_18', terminus: 'Celtae,', analysis_morphologicus: 'Sustantivo (propio), masculino, plural, nominativo. Predicado nominal de "appellantur".', analysis_morphologicus_en: 'Noun (proper), masculine, plural, nominative. Predicate nominative of "appellantur".', analysis_morphologicus_zh: '名詞（專有），陽性，複數，主格。「appellantur」的表語。'},
                            { id_verbi: 'v1_19', terminus: 'nostra', analysis_morphologicus: 'Adjetivo posesivo, femenino, singular, ablativo. Concuerda con "lingua" elidida ("en la nuestra [lengua]").', analysis_morphologicus_en: 'Possessive adjective, feminine, singular, ablative. Agrees with the implied "lingua" ("in our [language]").', analysis_morphologicus_zh: '物主形容詞，陰性，單數，離格。修飾省略的「lingua」（「用我們的[語言]」）。'},
                            { id_verbi: 'v1_20', terminus: 'Galli', analysis_morphologicus: 'Sustantivo (propio), masculino, plural, nominativo. Predicado nominal de "appellantur".', analysis_morphologicus_en: 'Noun (proper), masculine, plural, nominative. Predicate nominative of "appellantur".', analysis_morphologicus_zh: '名詞（專有），陽性，複數，主格。「appellantur」的表語。'},
                            { id_verbi: 'v1_21', terminus: 'appellantur.', analysis_morphologicus: 'Verbo, 3ª persona, plural, presente de indicativo pasivo ("son llamados").', analysis_morphologicus_en: 'Verb, 3rd person, plural, present indicative passive ("are called").', analysis_morphologicus_zh: '動詞，第三人稱，複數，現在時直陳被動語態（「被稱為」）。'}
                            ,
{
    id_orationis: 'o2',
    textus_originalis: "Hi omnes lingua, institutis, legibus inter se differunt.",
    analysis_syntacticus: {
        es: {
            titulus: "Análisis Sintáctico",
            contentus: `<p>Se trata de una oración simple y activa. El <b>sujeto</b> es el pronombre "<i>Hi</i>" (Estos), modificado por el adjetivo "<i>omnes</i>" (todos).</p><p>El <b>verbo principal</b> es "<i>differunt</i>" (difieren), que rige la estructura.</p><p>La expresión "<i>inter se</i>" (entre sí) funciona como un complemento del verbo, indicando reciprocidad.</p><p>Finalmente, "<i>lingua</i>", "<i>institutis</i>" y "<i>legibus</i>" son tres sustantivos en caso <b>ablativo</b>. Sintácticamente, funcionan como complementos circunstanciales de respeto o separación, especificando en qué aspectos se produce la diferencia.</p>`
        },
        en: {
            titulus: "Syntactic Analysis",
            contentus: `<p>This is a simple, active sentence. The <b>subject</b> is the pronoun "<i>Hi</i>" (These), modified by the adjective "<i>omnes</i>" (all).</p><p>The <b>main verb</b> is "<i>differunt</i>" (they differ), which governs the structure.</p><p>The expression "<i>inter se</i>" (among themselves) functions as a complement to the verb, indicating reciprocity.</p><p>Finally, "<i>lingua</i>", "<i>institutis</i>", and "<i>legibus</i>" are three nouns in the <b>ablative</b> case. Syntactically, they function as circumstantial complements of respect or separation, specifying in what aspects the difference occurs.</p>`
        },
        zh: {
            titulus: "句法分析",
            contentus: `<p>這是一個簡單的主動句。<b>主語</b>是代名詞「<i>Hi</i>」(這些人)，由形容詞「<i>omnes</i>」(所有的)修飾。</p><p><b>主要動詞</b>是「<i>differunt</i>」(他們不同)，它支配著整個句子結構。</p><p>片語「<i>inter se</i>」(彼此之間)作為動詞的補語，表示相互關係。</p><p>最後，「<i>lingua</i>」、「<i>institutis</i>」和「<i>legibus</i>」是三個處於<b>離格</b>的名詞。在句法上，它們作為方面或分離的狀語補語，具體說明了差異存在於哪些方面。</p>`
        }
    },
    translationes_explicatae: {
        es: {
            titulus: "Traducciones y Comentarios",
            contentus: `<p><b>Traducción Literal:</b><br><i>Estos todos en lengua, en instituciones, en leyes entre sí difieren.</i></p><p><b>Traducción Idiomática/Literaria:</b><br><i>Todos estos se diferencian entre sí en la lengua, las instituciones y las leyes.</i></p>`
        },
        en: {
            titulus: "Translations & Commentary",
            contentus: `<p><b>Literal Translation:</b><br><i>These all in language, in institutions, in laws among themselves differ.</i></p><p><b>Idiomatic/Literary Translation:</b><br><i>All of these differ from each other in language, institutions, and laws.</i></p>`
        },
        zh: {
            titulus: "翻譯與註釋",
            contentus: `<p><b>直譯：</b><br><i>所有這些人在語言上、制度上、法律上彼此不同。</i></p><p><b>意譯/文學翻譯：</b><br><i>所有這些民族的語言、制度和法律都各不相同。</i></p>`
        }
    },
    verba: [
        { id_verbi: 'v2_1', terminus: 'Hi', analysis_morphologicus: 'Pronombre demostrativo (hic, haec, hoc), masculino, plural, nominativo. Sujeto de "differunt".', analysis_morphologicus_en: 'Demonstrative pronoun (hic, haec, hoc), masculine, plural, nominative. Subject of "differunt".', analysis_morphologicus_zh: '指示代名詞 (hic, haec, hoc)，陽性，複數，主格。「differunt」的主語。'},
        { id_verbi: 'v2_2', terminus: 'omnes', analysis_morphologicus: 'Adjetivo (omnis, -e), masculino, plural, nominativo. Modifica a "Hi".', analysis_morphologicus_en: 'Adjective (omnis, -e), masculine, plural, nominative. Modifies "Hi".', analysis_morphologicus_zh: '形容詞 (omnis, -e)，陽性，複數，主格。修飾「Hi」。'},
        { id_verbi: 'v2_3', terminus: 'lingua,', analysis_morphologicus: 'Sustantivo (lingua, -ae), femenino, singular, ablativo. Ablativo de respeto o separación.', analysis_morphologicus_en: 'Noun (lingua, -ae), feminine, singular, ablative. Ablative of respect or separation.', analysis_morphologicus_zh: '名詞 (lingua, -ae)，陰性，單數，離格。方面或分離離格。'},
        { id_verbi: 'v2_4', terminus: 'institutis,', analysis_morphologicus: 'Sustantivo (institutum, -i), neutro, plural, ablativo. Ablativo de respeto o separación.', analysis_morphologicus_en: 'Noun (institutum, -i), neuter, plural, ablative. Ablative of respect or separation.', analysis_morphologicus_zh: '名詞 (institutum, -i)，中性，複數，離格。方面或分離離格。'},
        { id_verbi: 'v2_5', terminus: 'legibus', analysis_morphologicus: 'Sustantivo (lex, legis), femenino, plural, ablativo. Ablativo de respeto o separación.', analysis_morphologicus_en: 'Noun (lex, legis), feminine, plural, ablative. Ablative of respect or separation.', analysis_morphologicus_zh: '名詞 (lex, legis)，陰性，複數，離格。方面或分離離格。'},
        { id_verbi: 'v2_6', terminus: 'inter', analysis_morphologicus: 'Preposición. Rige acusativo ("entre").', analysis_morphologicus_en: 'Preposition. Governs accusative ("between", "among").', analysis_morphologicus_zh: '介詞。支配賓格（「在...之間」）。'},
        { id_verbi: 'v2_7', terminus: 'se', analysis_morphologicus: 'Pronombre reflexivo, 3ª persona, plural, acusativo. Término de la preposición "inter".', analysis_morphologicus_en: 'Reflexive pronoun, 3rd person, plural, accusative. Object of the preposition "inter".', analysis_morphologicus_zh: '反身代名詞，第三人稱，複數，賓格。介詞「inter」的賓語。'},
        { id_verbi: 'v2_8', terminus: 'differunt.', analysis_morphologicus: 'Verbo (differo), 3ª persona, plural, presente de indicativo activo.', analysis_morphologicus_en: 'Verb (differo), 3rd person, plural, present indicative active.', analysis_morphologicus_zh: '動詞 (differo)，第三人稱，複數，現在時直陳主動語態。'}
    ]
}
                ]
            }
        };
        // =========================================================================================
        // === FIN DE LA ZONA DE DATOS ===
        // (No es necesario editar nada debajo de esta línea)
        // =========================================================================================

        const mainTitle = document.getElementById('main-title');
        const subtitle = document.getElementById('subtitle');
        const author = document.getElementById('author');
        const contextTitle = document.getElementById('context-title');
        const contextContent = document.getElementById('context-content');
        const textTitle = document.getElementById('text-title');
        const paragrafusContentus = document.getElementById('paragrafus-contentus');
        const marginaliaContentus = document.getElementById('marginalia-contentus');
        const languageSwitcher = document.getElementById('language-switcher');
        const footerText = document.getElementById('footer-text');

        let idiomaActivo = 'es';
        let activumVerbum = null;
        let activaOratio = null;

        const langConfig = {
            en: { analysisTitle: 'Morphological Analysis', textTitle: 'Text for Analysis', selectWordText: 'Select a word to see its analysis.', footerTextContent: '<i>Click a word to see its analysis and details of the sentence.</i>' },
            es: { analysisTitle: 'Análisis Morfológico', textTitle: 'Texto para Analizar', selectWordText: 'Seleccione una palabra para ver su análisis.', footerTextContent: '<i>Haz clic en una palabra para ver su análisis y los detalles de la oración.</i>' },
            zh: { analysisTitle: '詞法分析', textTitle: '分析文本', selectWordText: '請選取一個單字以查看其分析。', footerTextContent: '<i>點擊一個單字以查看其分析及句子詳情。</i>' }
        };

        function initialRender() {
            idiomaActivo = document.querySelector('.lang-btn.active-lang').dataset.lang || 'es';
            mainTitle.textContent = corpus.titulus_principalis;
            author.textContent = corpus.auctor;
            
            updateStaticContent();
            reddeParagrafum();
            actualizaMarginalia();
        }

        function updateStaticContent() {
            const config = langConfig[idiomaActivo];
            subtitle.textContent = corpus.titulus_secundarius[idiomaActivo];
            contextTitle.textContent = corpus.introductio[idiomaActivo].titulus;
            contextContent.innerHTML = corpus.introductio[idiomaActivo].contentus;
            textTitle.textContent = config.textTitle;
            footerText.innerHTML = config.footerTextContent;
        }

        function reddeParagrafum() {
            let fullText = corpus.textus.orationes.map(o => o.textus_originalis).join(' ');
            let allVerba = corpus.textus.orationes.flatMap(o => o.verba.map(v => ({...v, oratioId: o.id_orationis})));
            allVerba.sort((a,b) => b.terminus.replace(/[,.·;:]/g, '').length - a.terminus.replace(/[,.·;:]/g, '').length);
            
            allVerba.forEach(verbum => {
                const cleanTerminus = verbum.terminus.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
                const regex = new RegExp(`(${cleanTerminus})(?![^<]*?>|[^<>]*?<\\/)`, 'g');
                const replacement = `<span class="verbum" data-verbum-id="${verbum.id_verbi}" data-oratio-id="${verbum.oratioId}">$1</span>`;
                fullText = fullText.replace(regex, replacement);
            });
            paragrafusContentus.innerHTML = fullText;
        }
        
        function actualizaMarginalia() {
            let htmlContentus = '';
            const config = langConfig[idiomaActivo];

            htmlContentus += `<section id="analysis-morphologicus-section" class="mb-6"><h3 class="text-xl font-semibold text-gray-800 mb-4">${config.analysisTitle}</h3>`;
            
            if (activumVerbum) {
                const analysisText = activumVerbum[`analysis_morphologicus_${idiomaActivo}`] || activumVerbum.analysis_morphologicus;
                htmlContentus += `
                    <h4 class="text-2xl textum-classicum text-gray-800 mb-4">${activumVerbum.terminus}</h4>
                    <div class="space-y-4">
                        <div><p class="text-gray-700 mt-1">${analysisText}</p></div>
                    </div>`;
            } else {
                htmlContentus += `<div class="p-4 bg-stone-200 rounded-md text-gray-600"><p>${config.selectWordText}</p></div>`;
            }
            htmlContentus += `</section>`;

            if (activaOratio) {
                const syntaxis = activaOratio.analysis_syntacticus[idiomaActivo];
                const translationes = activaOratio.translationes_explicatae[idiomaActivo];

                htmlContentus += `<hr class="border-stone-300 my-6">`;
                
                // --- Menú Desplegable para Análisis Sintáctico ---
                htmlContentus += `
                    <section id="analysis-sintacticus-section" class="mb-4">
                        <details>
                            <summary class="text-xl font-semibold text-gray-800 mb-2">${syntaxis.titulus}</summary>
                            <div class="details-content text-sm text-gray-700">${syntaxis.contentus}</div>
                        </details>
                    </section>`;

                // --- Menú Desplegable para Traducciones ---
                htmlContentus += `
                    <section id="analysis-translationes-section">
                         <details>
                            <summary class="text-xl font-semibold text-gray-800 mb-2">${translationes.titulus}</summary>
                            <div class="details-content text-sm text-gray-700">${translationes.contentus}</div>
                        </details>
                    </section>`;
            }
            
            marginaliaContentus.innerHTML = htmlContentus;
        }

        paragrafusContentus.addEventListener('click', (e) => {
            const verbumTarget = e.target.closest('.verbum');
            if (!verbumTarget) {
                if (!e.target.closest('#marginalia-sinistra')) {
                    document.querySelectorAll('.activus').forEach(el => el.classList.remove('activus'));
                    activumVerbum = null;
                    activaOratio = null;
                    actualizaMarginalia();
                }
                return;
            }

            const isAlreadyActive = verbumTarget.classList.contains('activus');
            document.querySelectorAll('.activus').forEach(el => el.classList.remove('activus'));
            
            if (isAlreadyActive) {
                activumVerbum = null;
                activaOratio = null;
            } else {
                const verbumId = verbumTarget.dataset.verbumId;
                const oratioId = verbumTarget.dataset.oratioId;
                activaOratio = corpus.textus.orationes.find(o => o.id_orationis === oratioId);
                if (activaOratio) {
                    activumVerbum = activaOratio.verba.find(v => v.id_verbi === verbumId);
                }
                verbumTarget.classList.add('activus');
            }
            actualizaMarginalia();
        });

        languageSwitcher.addEventListener('click', (e) => {
            const targetBtn = e.target.closest('.lang-btn');
            if (!targetBtn) return;
            
            const newLang = targetBtn.dataset.lang;
            if (newLang === idiomaActivo) return;
            
            idiomaActivo = newLang;
            
            languageSwitcher.querySelector('.active-lang').classList.remove('active-lang');
            targetBtn.classList.add('active-lang');
            
            updateStaticContent();
            actualizaMarginalia();
        });

        initialRender();
    });
    </script>
</body>
</html>
